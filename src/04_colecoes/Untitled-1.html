<section class="page-content main-content video-conteudo-area top-content">
    <section class="page-content-wrapper">
        <div class="top-content-text oculto">
            <div class="box_lead2">
                <span class="titulo_box_lead2"
                    >Por que eu devo ler este artigo:</span
                >
                <p>
                    Apresentar as interfaces, implementações e algoritmos da
                    Collections Framework, assim como as estratégias para
                    escolher a coleção mais adequada visando solucionar os
                    requisitos de uma aplicação.
                </p>

                <p>
                    Oferecer a base teórica necessária para o desenvolvedor não
                    apenas conhecer individualmente os elementos que compõem a
                    Collections Framework, mas também mostrar como aplicar cada
                    interface no desenvolvimento de aplicações que necessitem de
                    estruturas de dados.
                </p>

                <p>
                    O uso das interfaces disponíveis no Collections Framework
                    evita que o programador desperdice esforço para desenvolver
                    suas próprias estruturas e se concentre em outras partes
                    importantes da programação; suas estruturas de dados e
                    algoritmos de alta qualidade e excelente desempenho melhoram
                    a qualidade e a performance das aplicações; reduz o esforço
                    de ter que aprender e usar novas APIs; assim como promove o
                    reuso de software e permite interoperabilidade entre APIs
                    não relacionadas.
                </p>
            </div>
            <span class="top-content-btn"
                ><span class="top-content-label">Ver mais</span>
                <span class="top-content-icon"
                    ><span class="icon-line1"></span
                    ><span class="icon-line2"></span></span
            ></span>
        </div>

        <section class="body-menu-top">
            <button
                class="action-menu-item comment-button"
                style="margin-top: 0"
            >
                <span class="label">Suporte ao aluno</span>
                <span class="btn-icon">
                    <svg class="svg-element border" viewBox="0 0 35 35">
                        <path
                            id="Path_975"
                            class="st0"
                            d="M26,7.8H8.8c-1.5,0-2.7,1.2-2.7,2.7v16.8l5.8-4.6h14.3c1.5,0,2.7-1.2,2.7-2.7v-9.5
                                    C28.7,8.9,27.5,7.9,26,7.8z"
                        ></path>
                        <line
                            id="Line_423"
                            class="st0"
                            x1="11.4"
                            y1="12.9"
                            x2="23.6"
                            y2="12.9"
                        ></line>
                        <line
                            id="Line_424"
                            class="st0"
                            x1="11.4"
                            y1="17"
                            x2="17.4"
                            y2="17"
                        ></line>
                    </svg>
                </span>
            </button>

            <button class="note-button" data-id="18450">
                <span class="label">Anotar</span>
                <span class="btn-icon">
                    <svg class="icone-svg svg-notes" viewBox="0 0 35 35">
                        <path
                            class="svg-element pen"
                            d="M28.4,9.3L16.6,21.1l-4,1.4l1.4-3.9L25.8,6.8L28.4,9.3z"
                        ></path>
                        <polygon
                            class="svg-element border"
                            points="25.8,6.8 27.4,5.2 30,7.6 28.4,9.3 "
                        ></polygon>
                        <path
                            class="svg-element line"
                            d="M23.8,18.4v10.1c0,0.7-0.5,1.2-1.2,1.2H6.2c-0.7,0-1.2-0.5-1.2-1.2V7.3c0-0.7,0.5-1.2,1.2-1.2h15.5"
                        ></path>
                        <line
                            class="svg-element line"
                            x1="8.4"
                            y1="10.5"
                            x2="18.8"
                            y2="10.5"
                        ></line>
                        <line
                            class="svg-element line"
                            x1="8.4"
                            y1="14.2"
                            x2="14.9"
                            y2="14.2"
                        ></line>
                        <line
                            class="svg-element line"
                            x1="8.4"
                            y1="17.8"
                            x2="11.1"
                            y2="17.8"
                        ></line>
                        <line
                            class="svg-element line"
                            x1="8.4"
                            y1="22.5"
                            x2="12.6"
                            y2="22.5"
                        ></line>
                    </svg>
                </span>
            </button>
            <button class="finish-btn" data-id="18450">
                <span class="label">Marcar como concluído</span>
                <span class="btn-icon">
                    <svg
                        class="svg-symbol"
                        id="svg-checked"
                        viewBox="0 0 35 35"
                    >
                        <circle
                            class="st1"
                            cx="17.5"
                            cy="17.5"
                            r="10.5"
                        ></circle>
                        <path
                            id="Path_1130_1_"
                            class="st0"
                            d="M21.1,14.4l-4.4,6.9l-3.5-4"
                        ></path>
                    </svg>
                </span>
            </button>
        </section>

        <div class="breadcrumb">
            <a href="https://www.devmedia.com.br/artigos/" title="Artigos"
                >Artigos</a
            >
            <span class="arrow-left"></span>
            <a
                href="https://www.devmedia.com.br/artigos/java"
                title="Artigos de Java"
                >Java</a
            >
            <span class="arrow-left"></span>
            <span class="bread-artigo"
                >Java Collections: Como utilizar Collections</span
            >
        </div>

        <p>
            Desde as primeiras versões, Java dispõe das estruturas de arrays e
            as classes <span class="lf-badge">Vector</span> e
            <span class="lf-badge">Hashtable</span>. No entanto, além da
            dificuldade em implementar estruturas de dados utilizando arrays, os
            desenvolvedores sentiam falta de classes que implementassem
            estruturas como listas ligadas e tabelas de espalhamento (hash).
            Para atender a essas necessidades, a partir de Java 1.2, foi criado
            um conjunto de interfaces e classes denominado Collections
            Framework, que faz parte do pacote
            <span class="lf-badge">java.util</span>.
        </p>

        <h3>O que é Collections Framework?</h3>

        <p>
            Collections Framework é um conjunto bem definido de interfaces e
            classes para representar e tratar grupos de dados como uma única
            unidade, que pode ser chamada coleção, ou collection. A Collections
            Framework contém os seguintes elementos:
        </p>

        <ul>
            <li>
                <b>Interfaces</b>: tipos abstratos que representam as coleções.
                Permitem que coleções sejam manipuladas tendo como base o
                conceito “Programar para interfaces e não para implementações”,
                desde que o acesso aos objetos se restrinja apenas ao uso de
                métodos definidos nas interfaces;
            </li>
            <li>
                <b>Implementações</b>: são as implementações concretas das
                interfaces;
            </li>
            <li>
                <b>Algoritmos</b>: são os métodos que realizam as operações
                sobre os objetos das coleções, tais como busca e ordenação.
            </li>
        </ul>

        <p>
            A <b>Figura 1</b> mostra a árvore da hierarquia de interfaces e
            classes da Java Collections Framework que são derivadas da interface
            <span class="lf-badge">Collection</span>. O diagrama usa a notação
            da UML, onde as linhas cheias representam
            <span class="lf-badge">extends</span> e as linhas pontilhadas
            representam <span class="lf-badge">implements</span>.
        </p>

        <figure class="lazy-img">
            <img
                class="imagem_artigo loaded"
                alt="A hierarquia de interfaces e classes"
                src="https://arquivo.devmedia.com.br/REVISTAS/easyjava/imagens/1/4/image001.jpg"
            />
            <figcaption>
                <b>Figura 1</b>. A hierarquia de interfaces e classes
            </figcaption>
        </figure>

        <p>
            A hierarquia da Collections Framework tem uma segunda árvore. São as
            classes e interfaces relacionadas a mapas, que não são derivadas de
            <span class="lf-badge">Collection</span>, como mostra a
            <b>Figura 2</b>. Essas interfaces, mesmo não sendo consideradas
            coleções, podem ser manipuladas como tal.
        </p>

        <figure class="lazy-img">
            <img
                class="imagem_artigo loaded"
                alt="Hierarquia de mapas"
                src="https://arquivo.devmedia.com.br/REVISTAS/easyjava/imagens/1/4/image002.jpg"
            />
            <figcaption><b>Figura 2</b>. Hierarquia de mapas</figcaption>
        </figure>

        <h3>Interfaces</h3>

        <p>
            Neste momento vamos apresentar uma breve descrição de cada uma das
            interfaces da hierarquia:
        </p>

        <ul>
            <li>
                <span class="lf-badge">Collection</span> – está no topo da
                hierarquia. Não existe implementação direta dessa interface, mas
                ela define as operações básicas para as coleções, como
                adicionar, remover, esvaziar, etc.;
            </li>

            <li>
                <span class="lf-badge">Set</span> – interface que define uma
                coleção que não permite elementos duplicados. A interface
                <span class="lf-badge">SortedSet</span>, que estende
                <span class="lf-badge">Set</span>, possibilita a classificação
                natural dos elementos, tal como a ordem alfabética;
            </li>

            <li>
                <span class="lf-badge">List</span> – define uma coleção
                ordenada, podendo conter elementos duplicados. Em geral, o
                usuário tem controle total sobre a posição onde cada elemento é
                inserido e pode recuperá-los através de seus índices. Prefira
                esta interface quando precisar de acesso aleatório, através do
                índice do elemento;
            </li>

            <li>
                <span class="lf-badge">Queue</span> – um tipo de coleção para
                manter uma lista de prioridades, onde a ordem dos seus
                elementos, definida pela implementação de Comparable ou
                Comparator, determina essa prioridade. Com a interface fila
                pode-se criar filas e pilhas;
            </li>

            <li>
                <span class="lf-badge">Map</span> – mapeia chaves para valores.
                Cada elemento tem na verdade dois objetos: uma chave e um valor.
                Valores podem ser duplicados, mas chaves não.
                <span class="lf-badge">SortedMap</span> é uma interface que
                estende <span class="lf-badge">Map</span>, e permite
                classificação ascendente das chaves. Uma aplicação dessa
                interface é a classe Properties, que é usada para persistir
                propriedades/configurações de um sistema, por exemplo.
            </li>
        </ul>

        <div class="lf-nota">
            <b>Nota</b>: Observe que usamos acima os termos
            <span class="lf-badge">ordenação</span> e
            <span class="lf-badge">classificação</span>. Dizemos que uma
            estrutura está ordenada se ela pode ser percorrida (iterada) em uma
            certa ordem, tal como os itens de um
            <span class="lf-badge">ArrayList</span> podem ser percorridos
            através de seus índices. Por sua vez, a classificação diz respeito à
            ordenação na essência dos dados, tal como a classificação em ordem
            alfabética de <span class="lf-badge">Strings</span> ou ordem
            numérica das classes <span class="lf-badge">wrapper</span>, como
            <span class="lf-badge">Integer</span> e
            <span class="lf-badge">Double</span>, por exemplo. Podemos afirmar
            que uma estrutura classificada é uma estrutura ordenada, mas o
            inverso não é verdadeiro.
        </div>

        <p>
            A API oferece também interfaces que permitem percorrer uma coleção
            derivada de Collection. Neste artigo falaremos de:
        </p>

        <ul>
            <li>
                <span class="lf-badge">Iterator</span> – possibilita percorrer
                uma coleção e remover seus elementos;
            </li>
            <li>
                <span class="lf-badge">ListIterator</span> – estende
                <span class="lf-badge">Iterator</span> e suporta acesso
                bidirecional em uma lista, modificando e/ou removendo elementos.
            </li>
        </ul>

        <h3>Implementações</h3>

        <p>
            As interfaces apresentadas anteriormente possuem diversas
            implementações que são utilizadas para armazenar as coleções. Na
            <b>Tabela 1</b> estão resumidas as implementações mais comuns.
        </p>

        <div class="table-area">
            <div class="table-caption">
                <b>Tabela 1</b>. Implementações de uso geral
            </div>
            <div class="responsive-table">
                <table>
                    <tbody>
                        <tr>
                            <th colspan="6">Implementações</th>
                        </tr>
                        <tr>
                            <th>Interfaces</th>
                            <th>Tabela de Espalhamento</th>
                            <th>Array Redimensionável</th>
                            <th>Árvore</th>
                            <th>Lista Ligada</th>
                            <th>Tabela de Espalhamento + Lista Ligada</th>
                        </tr>
                        <tr>
                            <td>Set</td>
                            <td>HashSet</td>
                            <td></td>
                            <td>TreeSet</td>
                            <td></td>
                            <td>LinkedHashSet</td>
                        </tr>
                        <tr>
                            <td>List</td>
                            <td></td>
                            <td>ArrayList</td>
                            <td></td>
                            <td>LinkedList</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Queue</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Map</td>
                            <td>HashMap</td>
                            <td></td>
                            <td>TreeMap</td>
                            <td></td>
                            <td>LinkedHashMap</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <p>
            A seguir apresentamos algumas características das implementações que
            podem ajudar a decidir qual delas utilizar em uma aplicação:
        </p>

        <ul>
            <li>
                <span class="lf-badge">ArrayList</span> – é como um array cujo
                tamanho pode crescer. A busca de um elemento é rápida, mas
                inserções e exclusões não são. Podemos afirmar que as inserções
                e exclusões são lineares, o tempo cresce com o aumento do
                tamanho da estrutura. Esta implementação é preferível quando se
                deseja acesso mais rápido aos elementos. Por exemplo, se você
                quiser criar um catálogo com os livros de sua biblioteca pessoal
                e cada obra inserida receber um número sequencial (que será
                usado para acesso) a partir de zero;
            </li>
            <li>
                <span class="lf-badge">LinkedList</span> – implementa uma lista
                ligada, ou seja, cada nó contém o dado e uma referência para o
                próximo nó. Ao contrário do
                <span class="lf-badge">ArrayList</span>, a busca é linear e
                inserções e exclusões são rápidas. Portanto, prefira LinkedList
                quando a aplicação exigir grande quantidade de inserções e
                exclusões. Um pequeno sistema para gerenciar suas compras
                mensais de supermercado pode ser uma boa aplicação, dada a
                necessidade de constantes inclusões e exclusões de produtos;
            </li>
            <li>
                <span class="lf-badge">HashSet</span> – o acesso aos dados é
                mais rápido que em um <span class="lf-badge">TreeSet</span>, mas
                nada garante que os dados estarão ordenados. Escolha este
                conjunto quando a solução exigir elementos únicos e a ordem não
                for importante. Poderíamos usar esta implementação para criar um
                catálogo pessoal das canções da nossa discografia;
            </li>
            <li>
                <span class="lf-badge">TreeSet</span> – os dados são
                classificados, mas o acesso é mais lento que em um
                <span class="lf-badge">HashSet</span>. Se a necessidade for um
                conjunto com elementos não duplicados e acesso em ordem natural,
                prefira o TreeSet. É recomendado utilizar esta coleção para as
                mesmas aplicações de HashSet, com a vantagem dos objetos estarem
                em ordem natural;
            </li>
            <li>
                <span class="lf-badge">LinkedHashSet</span> – é derivada de
                <span class="lf-badge">HashSet</span>, mas mantém uma lista
                duplamente ligada através de seus itens. Seus elementos são
                iterados na ordem em que foram inseridos. Opcionalmente é
                possível criar um LinkedHashSet que seja percorrido na ordem em
                que os elementos foram acessados na última iteração. Poderíamos
                usar esta implementação para registrar a chegada dos corredores
                de uma maratona;
            </li>
            <li>
                <span class="lf-badge">HashMap</span> – baseada em tabela de
                espalhamento, permite chaves e valores null. Não existe garantia
                que os dados ficarão ordenados. Escolha esta implementação se a
                ordenação não for importante e desejar uma estrutura onde seja
                necessário um ID (identificador). Um exemplo de aplicação é o
                catálogo da biblioteca pessoal, onde a chave poderia ser o ISBN
                (International Standard Book Number);
            </li>
            <li>
                <span class="lf-badge">TreeMap</span> – implementa a interface
                <span class="lf-badge">SortedMap</span>. Há garantia que o mapa
                estará classificado em ordem ascendente das chaves. Mas existe a
                opção de especificar uma ordem diferente. Use esta implementação
                para um mapa ordenado. Aplicação semelhante a HashMap, com a
                diferença que TreeMap perde no quesito desempenho;
            </li>
            <li>
                <span class="lf-badge">LinkedHashMap</span> – mantém uma lista
                duplamente ligada através de seus itens. A ordem de iteração é a
                ordem em que as chaves são inseridas no mapa. Se for necessário
                um mapa onde os elementos são iterados na ordem em que foram
                inseridos, use esta implementação. O registro dos corredores de
                uma maratona, onde a chave seria o número que cada um recebe no
                ato da inscrição, é um exemplo de aplicação desta coleção.
            </li>
        </ul>

        <p>
            Cada uma das implementações tem todos os métodos definidos em suas
            interfaces. Em qualquer uma delas é possível inserir elementos
            <span class="lf-badge">null</span>. Em mapas, tanto chaves quanto
            valores podem ser <span class="lf-badge">null</span>. Diferente de
            <span class="lf-badge">Vector</span> e
            <span class="lf-badge">Hashtable</span>, não são seguras para serem
            usadas com threads (não são Thread-safe). Ou seja, o acesso
            concorrente a esses objetos pode produzir resultados imprevisíveis.
            Além disso, são serializáveis – isto é, seus estados podem ser
            salvos – e suportam o método <span class="lf-badge">clone()</span>,
            que cria uma cópia de um objeto.
        </p>

        <div class="lf-nota">
            <b>Nota</b>: Thread-safe é o termo designado a objetos seguros para
            serem usados com threads.
        </div>

        <p>
            Seguindo as boas práticas de orientação a objetos, você deve
            programar para interfaces e não para implementações. A recomendação
            é escolher uma implementação para instanciar o objeto e atribuir a
            nova coleção ao tipo de interface correspondente. Ou ainda, passar o
            objeto coleção para um método que espera um argumento do tipo
            interface. Seguindo essas práticas você conseguirá o que chamamos de
            baixo acoplamento, ou seja, poderá mudar facilmente de implementação
            sem que isso acarrete alteração no código da aplicação. Desta forma
            você fica livre para mudar a implementação sempre que questões
            relacionadas a desempenho ou detalhes de comportamento exigirem a
            mudança.
        </p>

        <div class="lf-nota">
            <b>Nota</b>: Não confunda a interface
            <span class="lf-badge">Collection</span> com a classe
            <span class="lf-badge">Collections</span>. Essa classe oferece
            métodos estáticos utilitários que podem manipular coleções. Outra
            classe utilitária é <span class="lf-badge">Arrays</span>, cujos
            métodos estáticos são aplicados a arrays.
        </div>

        <p>
            Após uma visão geral da Collections Framework, vamos por as mãos na
            massa e desenvolver uma aplicação exemplo a partir de situações do
            dia-a-dia, nas quais são analisadas as necessidades apresentadas
            pelo problema para decidir a interface a ser utilizada.
        </p>

        <h3>Como aplicar adequadamente a Collections Framework</h3>

        <p>
            Vimos então que temos sete interfaces:
            <span class="lf-badge">Collection</span>,
            <span class="lf-badge">List</span>,
            <span class="lf-badge">Set</span>,
            <span class="lf-badge">SortedSet</span>,
            <span class="lf-badge">Map</span>,
            <span class="lf-badge">SortedMap</span> e
            <span class="lf-badge">Queue</span>. A pergunta que geralmente se
            faz é: Qual delas usar? Para selecionar adequadamente uma interface
            devemos analisar o problema e verificar como ele se enquadra nas
            características de cada interface. Somente após isso devemos
            decidir.
        </p>

        <p>
            Iniciaremos com um problema simples. Queremos manter uma lista de
            nomes de alunos de uma escola que oferece cursos de Informática
            básica. Essa lista será percorrida na ordem em que os elementos são
            inseridos. Além disso, queremos poder acessar um nome de aluno
            aleatoriamente.
        </p>

        <p>
            Analisando os requisitos do problema (lista na ordem de inserção e
            recuperação aleatória) e as características das interfaces
            disponíveis, optamos por utilizar
            <span class="lf-badge">List</span>. Elementos não duplicados é um
            requisito que pode ser inferido na descrição do problema e isso
            poderia nos levar a escolher <span class="lf-badge">Set</span>, mas
            vamos manter nossa decisão inicial por questões didáticas.
        </p>

        <h3>A interface List</h3>

        <p>
            <span class="lf-badge">List</span> tem duas implementações –
            <span class="lf-badge">ArrayList</span> e
            <span class="lf-badge">LinkedList</span>.
            <span class="lf-badge">ArrayList</span> oferece acesso aleatório
            rápido através do índice. Já em
            <span class="lf-badge">LinkedList</span> o acesso aleatório é lento
            e necessita de um objeto nó para cada elemento, que é composto pelo
            dado propriamente dito e uma referência para o próximo nó, ou seja,
            consome mais memória. Além dessas considerações, se for necessário
            inserir elementos no início e deletar elementos no interior da
            lista, a melhor opção poderia ser
            <span class="lf-badge">LinkedList</span>. Para apoiar a decisão de
            usar uma ou outra implementação é melhor fazer testes de desempenho.
            Um teste simples é mostrado na <b>Listagem 1</b>. Execute o programa
            e anote o tempo. Substitua ArrayList por LinkedList e repita o
            teste. Ao final escolha a implementação mais eficiente.
        </p>

        <p>
            Optamos então por usar <span class="lf-badge">ArrayList</span>. Uma
            implementação básica pode ser vista na <b>Listagem 2</b>. Esta
            aplicação instancia um ArrayList e o atribui a uma referência do
            tipo List. Insere alguns nomes de alunos com o método
            <span class="lf-badge">add()</span> e finalmente imprime a lista –
            as implementações de coleções sobrescrevem o método
            <span class="lf-badge">toString()</span>, por isso podemos imprimir
            a lista passando apenas a referência para o método
            <span class="lf-badge">println()</span>.
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 1</b>. Teste simples de desempenho
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teste</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> MAX <span class="token operator">=</span> <span class="token number">20000</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> tInicio <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> lista <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lista<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> tFim <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Tempo total: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>tFim <span class="token operator">-</span> tInicio<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 2</b>. Classe ListaAluno utilizando uma
                implementação da interface List
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListaAluno</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lista <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"João da Silva"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lista<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <p>
            Neste exemplo, a primeira consideração a fazer é que, tendo em mente
            a programação para interface, na declaração de
            <span class="lf-badge">lista</span> foi usado o tipo
            <span class="lf-badge">List</span>. Portanto, se decidirmos mudar a
            implementação para <span class="lf-badge">LinkedList</span>, é
            necessário apenas substituir o tipo
            <span class="lf-badge">ArrayList</span>.
        </p>

        <p>
            A segunda consideração refere-se ao tipo de dado que uma lista pode
            adicionar. Normalmente é possível inserir qualquer Object em uma
            lista, ou seja, assim como poderíamos inserir uma String, poderíamos
            inserir <span class="lf-badge">Aluno</span>,
            <span class="lf-badge">Integer</span>, etc. Se a lista permite
            inserir Object, na hora de recuperar esses dados, é necessário fazer
            cast para o tipo desejado. Além disso, não se teria certeza do tipo
            de dado que foi inserido, e o cast poderia causar uma exceção. A
            partir de Java 5 foi introduzido o conceito de Generics, que nos
            permite escrever código reusável para qualquer tipo de objeto. Sob a
            ótica da utilização deste conceito em coleções, para definirmos o
            tipo que lista poderá adicionar, incluímos o parâmetro em sua
            declaração. Dessa forma o compilador gerará um erro caso se tente
            adicionar um objeto que não seja String. E não será necessário usar
            cast durante a iteração.
        </p>

        <h3>Adicionando novo requisito – Ordem ascendente</h3>

        <p>
            Vamos supor agora que desejamos que a lista seja classificada em
            ordem ascendente. Observando a documentação da implementação
            <span class="lf-badge">ArrayList</span>, verificamos que não existe
            um método de ordenação. Para solucionar este requisito, uma opção
            seria mudar nossa aplicação para utilizar a interface
            <span class="lf-badge">Set</span>, onde os elementos estariam
            classificados pela ordem natural, no entanto a inserção de novos
            elementos seria mais lenta. Sendo assim, vamos utilizar a classe
            utilitária <span class="lf-badge">Collections</span>. Esta classe
            dispõe do método <span class="lf-badge">sort()</span>, que pode
            classificar uma interface <span class="lf-badge">List</span> em
            ordem natural ou classificar de acordo com a implementação da
            interface <span class="lf-badge">Comparator</span>, que logo
            estudaremos ainda neste artigo. A aplicação deste método pode ser
            constatada na <b>Listagem 3</b>, onde podemos observar que o método
            <span class="lf-badge">sort()</span> altera a lista original.
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 3</b>. Utilização do método sort() da classe
                Collections
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListaAluno</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lista <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"João da Silva"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lista<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>lista<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lista<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <h3>Adicionando novo requisito – Novos dados</h3>

        <p>
            Considere agora que as necessidades da nossa aplicação foram
            modificadas e que, precisamos, além do nome do aluno, o nome do
            curso que ele está fazendo e a sua nota. Definimos então a classe
            <span class="lf-badge">Aluno</span> de acordo com a
            <b>Listagem 4</b>, e modificamos a classe
            <span class="lf-badge">ListaAluno</span> conforme a
            <b>Listagem 5</b>, de maneira que a lista possa adicionar objetos
            <span class="lf-badge">Aluno</span> ao invés de
            <span class="lf-badge">String</span>.
        </p>

        <div class="code-area">
            <div class="code-caption"><b>Listagem 4</b>. Classe Aluno</div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aluno</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> nome<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> curso<span class="token punctuation">;</span>
  <span class="token keyword">double</span> nota<span class="token punctuation">;</span>

  <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token class-name">String</span> nome<span class="token punctuation">,</span> <span class="token class-name">String</span> curso<span class="token punctuation">,</span> <span class="token keyword">double</span> nota<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nome <span class="token operator">=</span> nome<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>curso <span class="token operator">=</span> curso<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nota <span class="token operator">=</span> nota<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Métodos getters e setters</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 5</b>. Classe ListaAluno modificada
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListaAluno</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span> lista <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Aluno</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"João da Silva"</span><span class="token punctuation">,</span> <span class="token string">"Linux básico"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">,</span> <span class="token string">"OpenOffice"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">,</span> <span class="token string">"Internet"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lista<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <h3>Classificação de objetos</h3>

        <p>
            Se incluirmos na <b>Listagem 5</b> a chamada ao método
            <span class="lf-badge">sort()</span> veremos que o código não
            compila. O compilador retornará um erro informando que não encontrou
            o método <span class="lf-badge">sort()</span>. Visto que apenas
            trocamos a classe <span class="lf-badge">String</span> pela classe
            <span class="lf-badge">Aluno</span>, parece razoável supor que o
            problema está na classe <span class="lf-badge">Aluno</span>, e está
            correto.
        </p>

        <p>
            A documentação da classe
            <span class="lf-badge">Collections</span> nos informa que o método
            <span class="lf-badge">sort()</span> aceita apenas listas cujos
            elementos sejam de tipos que implementem a interface
            <span class="lf-badge">Comparable</span>, e Aluno não implementa
            <span class="lf-badge">Comparable</span>.
        </p>

        <p>
            Esta interface tem apenas um método a ser implementado,
            <span class="lf-badge">compareTo()</span>. Sua implementação deve
            ser feita de forma a retornar um inteiro negativo, zero ou um
            inteiro positivo caso o objeto que execute o método seja menor,
            igual ou maior que o objeto passado como parâmetro. Cabe ao
            desenvolvedor decidir o critério que será adotado para comparar dois
            objetos.
        </p>

        <p>
            Na classe <span class="lf-badge">Aluno</span> consideraremos que a
            comparação entre dois objetos será determinada pela comparação entre
            seus nomes, que são do tipo String. Dessa forma a classe
            <span class="lf-badge">Aluno</span> deve ser alterada para que fique
            de acordo com a <b>Listagem 6</b>.
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 6</b>. A classe Aluno com implementação da interface
                Comparable
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aluno</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">String</span> nome<span class="token punctuation">;</span>
     <span class="token keyword">private</span> <span class="token class-name">String</span> curso<span class="token punctuation">;</span>
     <span class="token keyword">double</span> nota<span class="token punctuation">;</span>

  <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token class-name">String</span> nome<span class="token punctuation">,</span> <span class="token class-name">String</span> curso<span class="token punctuation">,</span> <span class="token keyword">double</span> nota<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nome <span class="token operator">=</span> nome<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>curso <span class="token operator">=</span> curso<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nota <span class="token operator">=</span> nota<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Aluno</span> aluno<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>aluno<span class="token punctuation">.</span><span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Métodos getters e setters</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <p>
            Note que no método <span class="lf-badge">compareTo()</span> fizemos
            simplesmente uma chamada ao mesmo método, só que para o atributo
            <span class="lf-badge">nome</span>, que é do tipo String. String é
            uma classe comparável, isto é, já implementa
            <span class="lf-badge">Comparable</span>.
        </p>

        <p>
            Agora podemos incluir uma chamada ao método
            <span class="lf-badge">sort()</span> na classe
            <span class="lf-badge">ListaAluno</span>. A ordenação implementada
            por <span class="lf-badge">Comparable</span> é chamada ordenação
            natural. Por exemplo, em uma String a ordenação natural é a ordem
            alfabética, em uma classe <span class="lf-badge">wrapper</span> –
            <span class="lf-badge">Integer</span>,
            <span class="lf-badge">Float</span>, etc. – a ordenação natural é a
            ordem numérica.
        </p>

        <p>
            Em certas situações precisamos de uma ordenação diferente da natural
            ou temos uma coleção de objetos de uma classe de terceiros que não é
            comparável, ou seja, não implementa Comparable. Nesses casos usamos
            a interface <span class="lf-badge">Comparator</span>. Para
            implementar esta ordenação é necessário escrever uma classe que
            implementa essa interface, definindo como os objetos da lista serão
            comparados. A interface possui apenas um método,
            <span class="lf-badge">compare()</span>. Ele recebe dois objetos que
            são comparados e retorna um inteiro negativo, zero ou um inteiro
            positivo se o primeiro objeto é menor, igual ou maior que o segundo.
            Na<b> Listagem 7</b> temos um exemplo de implementação de
            <span class="lf-badge">Comparator</span>.
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 7</b>. Implementação da interface Comparator
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComparaAluno</span> <span class="token keyword">implements</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Aluno</span> a<span class="token punctuation">,</span> <span class="token class-name">Aluno</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <p>
            Para usar esta implementação chamamos o método sobrecarregado
            <span class="lf-badge">sort()</span> da classe
            <span class="lf-badge">Collections</span>. Ele recebe como
            argumentos a lista a ser ordenada e uma instância da implementação
            de <span class="lf-badge">Comparator</span>, conforme a
            <b>Listagem 8</b>.
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 8</b>. Uso de Comparator para ordenar a lista
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListaAluno</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span> lista <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ComparaAluno</span> ca <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparaAluno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Aluno</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"João da Silva"</span><span class="token punctuation">,</span> <span class="token string">"Linux básico"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">,</span> <span class="token string">"OpenOffice"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">,</span> <span class="token string">"Internet"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lista<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>lista<span class="token punctuation">,</span> ca<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lista<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <div class="lf-nota">
            <b>Nota</b>: A classe Arrays, cujos métodos estáticos se aplicam a
            arrays, também tem os métodos
            <span class="lf-badge">sort()</span> que precisam das implementações
            de Comparable e Comparator, semelhante ao que foi estudado
            anteriormente para a classe <b>Collections</b>
        </div>

        <h3>A interface Iterator</h3>

        <p>
            As interfaces que estendem Collection herdam o método
            <span class="lf-badge">iterator()</span>. Quando este método é
            chamado por um <span class="lf-badge">collection</span> ele retorna
            uma interface <span class="lf-badge">Iterator</span>. Após essa
            chamada, usamos os métodos de
            <span class="lf-badge">Iterator</span> para percorrer um collection
            do início ao fim e até remover seus elementos. Na
            <b>Listagem 9</b> é mostrada uma aplicação desta interface em
            <span class="lf-badge">ListaAluno</span>.
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 9</b>. Utilização da interface Iterator para
                percorrer uma lista
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListaAluno</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span> lista <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Aluno</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"João da Silva"</span><span class="token punctuation">,</span> <span class="token string">"Linux básico"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">,</span> <span class="token string">"OpenOffice"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">,</span> <span class="token string">"Internet"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">,</span> <span class="token string">"OpenOffice"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lista<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lista<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> aluno<span class="token punctuation">;</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span> itr <span class="token operator">=</span> lista<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>itr<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      aluno <span class="token operator">=</span> itr<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>aluno<span class="token punctuation">.</span><span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <p>
            Observe que é necessário informar o tipo que será retornado pelo
            <span class="lf-badge">Iterator</span>. O método
            <span class="lf-badge">hasNext()</span> retorna
            <span class="lf-badge">true</span> se houver elemento a ser lido, e
            o método <span class="lf-badge">next()</span> retorna o objeto, de
            acordo com o tipo informado na declaração da interface. A partir de
            Java 5 foi introduzido o enhanced-for, que facilita muito a iteração
            sobre collections e arrays. Mostraremos uma aplicação desse comando
            quando falarmos de Map.
        </p>

        <div class="lf-nota">
            <b>Nota</b>: A interface <span class="lf-badge">Iterator</span> pode
            ser usada também para percorrer um
            <span class="lf-badge">Set</span>. O método
            <span class="lf-badge">listIterator()</span> retorna uma interface
            <span class="lf-badge">ListIterator</span>. Esta interface, além dos
            métodos <span class="lf-badge">hasNext()</span> e
            <span class="lf-badge">next()</span>, oferece o método
            <span class="lf-badge">hasPrevious()</span>, que retorna
            <span class="lf-badge">true</span> se existir um elemento anterior,
            e o método <span class="lf-badge">previous()</span> que retorna o
            elemento anterior. Além desses, ela tem métodos para remover e
            adicionar novos elementos.
        </div>

        <h3>A interface Set</h3>

        <p>
            Uma das características de <span class="lf-badge">List</span> é que
            ela permite elementos duplicados, o que não é desejável em nossa
            lista de alunos. Analisando as interfaces, concluímos que
            <span class="lf-badge">Set</span> é o que realmente precisamos, pois
            não permite elementos duplicados. Como
            <span class="lf-badge">HashSet</span> tem desempenho superior a
            <span class="lf-badge">TreeSet</span>, optamos por esta
            implementação.
        </p>

        <p>
            Dessa forma, pode-se observar na <b>Listagem 10</b> a classe
            <span class="lf-badge">ListaAluno</span> modificada para usar
            <span class="lf-badge">Set</span>. Note que forçamos a inserção de
            um objeto duplicado, mas quando executamos a aplicação constatamos
            que o objeto foi inserido. Se um Set não permite elementos
            duplicados, onde está o erro? Como
            <span class="lf-badge">HashSet</span> determina que dois objetos
            estão duplicados?
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 10</b>. ListaAluno usando a interface Set
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListaAluno</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span> conjunto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Aluno</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"João da Silva"</span><span class="token punctuation">,</span> <span class="token string">"Linux básico"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">,</span> <span class="token string">"OpenOffice"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">,</span> <span class="token string">"Internet"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">,</span> <span class="token string">"OpenOffice"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    conjunto<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    conjunto<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    conjunto<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    conjunto<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conjunto<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <p>
            <span class="lf-badge">HashSet</span> usa o código hash do objeto –
            dado pelo método <span class="lf-badge">hashCode()</span> – para
            saber onde deve por e onde buscar o mesmo no conjunto (Set). Antes
            ele verifica se não existe outro objeto no Set com o mesmo código
            hash. Se não há código hash igual, então ele sabe que o objeto a ser
            inserido não está duplicado. Dessa forma, classes cujas instâncias
            são elementos de HashSet devem implementar o método
            <span class="lf-badge">hashCode()</span>. Como consequência disso, a
            classe <span class="lf-badge">Aluno</span>, no nosso exemplo, deve
            sobrescrever o método <span class="lf-badge">hashCode()</span>.
        </p>

        <p>
            Conforme o contrato geral de
            <span class="lf-badge">hashCode()</span>, que consta na
            especificação da classe Object, se dois objetos são diferentes de
            acordo com <span class="lf-badge">equals()</span> então não é
            obrigatório que seus códigos
            <span class="lf-badge">hash</span> sejam diferentes.
        </p>

        <p>
            Portanto, objetos que retornam o mesmo código hash não são
            necessariamente iguais. Assim, quando encontra no conjunto um objeto
            com o mesmo código hash do objeto a ser inserido,
            <span class="lf-badge">HashSet</span> faz uma chamada ao método
            <span class="lf-badge">equals()</span> para verificar se os dois
            objetos são iguais. Dessa forma, a classe
            <span class="lf-badge">Aluno</span> deve sobrescrever o método
            <span class="lf-badge">equals()</span> também. Veja a classe Aluno
            com esses métodos implementados na <b>Listagem 11</b>.
        </p>

        <p>
            Criar código para <span class="lf-badge">equals()</span> e
            <span class="lf-badge">hashCode()</span> não é trivial, pois existem
            contratos definidos pela API de Java que devem ser rigorosamente
            seguidos. Por exemplo: se dois objetos são iguais, eles devem
            permanecer iguais durante toda a aplicação e devem resultar no mesmo
            <span class="lf-badge">hashCode()</span>. Para facilitar essa
            tarefa, Eclipse e NetBeans têm opções para gerar esses métodos para
            as classes.
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 11</b>. Implementação de equals() e hashCode() na
                classe Aluno
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Aluno</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> nome<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> curso<span class="token punctuation">;</span>
  <span class="token keyword">double</span> nota<span class="token punctuation">;</span>

  <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token class-name">String</span> nome<span class="token punctuation">,</span> <span class="token class-name">String</span> curso<span class="token punctuation">,</span> <span class="token keyword">double</span> nota<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nome <span class="token operator">=</span> nome<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>curso <span class="token operator">=</span> curso<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nota <span class="token operator">=</span> nota<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Aluno</span> aluno<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>aluno<span class="token punctuation">.</span><span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Aluno</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Aluno</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Métodos getters e setters</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nome<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <p>
            A implementação de <span class="lf-badge">hashCode()</span> e
            <span class="lf-badge">equals()</span> foi simplificada devido a
            questões didáticas. Definimos que um aluno terá o código hash igual
            ao hash do seu nome – que é String. Sendo assim, precisamos apenas
            retornar o código hash do nome do aluno no método
            <span class="lf-badge">hashCode()</span>. Ficou definido também que
            dois alunos são iguais quando têm nomes iguais, por isso no método
            <span class="lf-badge">equals()</span> é retornada a comparação
            entre os nomes de dois alunos.
        </p>

        <p>
            Agora podemos executar o programa da Listagem 10 e verificar que o
            objeto duplicado não foi inserido, tal como desejávamos. O método
            <span class="lf-badge">add()</span> de Set retorna true ou false
            para indicar se o objeto foi inserido ou não no collection. Se for
            necessário, verifique o retorno do método para ter garantia da
            inclusão do objeto.
        </p>

        <p>
            Se você programar pensando na interface e precisar de um conjunto
            (Set) classificado, use <span class="lf-badge">TreeSet</span> em vez
            de <span class="lf-badge">HashSet</span> sem necessidade de alterar
            o restante do código, pois tanto
            <span class="lf-badge">TreeSet</span> como
            <span class="lf-badge">HashSet</span> implementam exatamente os
            mesmos métodos de Set. No entanto, vale ressaltar que a classe dos
            elementos que são adicionados ao TreeSet deve implementar
            Comparable. Como Aluno já implementa esta interface não precisamos
            nos preocupar com isso.
        </p>

        <div class="lf-nota">
            <b>Nota</b>: Todas as classes em Java são derivadas de
            <span class="lf-badge">Object</span>, herdando assim métodos que,
            por padrão, devem ser sobrescritos, tais como:
            <span class="lf-badge">clone()</span>,
            <span class="lf-badge">equals()</span>,
            <span class="lf-badge">hashCode()</span>,
            <span class="lf-badge">toString()</span>, entre outros. Por padrão,
            o método <span class="lf-badge">equals()</span> usa
            <span class="lf-badge">==</span> para verificar se duas referências
            são iguais, enquanto
            <span class="lf-badge">hashCode()</span> retorna um inteiro
            calculado a partir do endereço do objeto. Classes Java como
            <span class="lf-badge">String</span> e
            <span class="lf-badge">Date</span> já sobrescrevem tais métodos.
        </div>

        <h3>A interface Map</h3>

        <p>
            Vamos supor que agora queremos uma estrutura onde possamos recuperar
            os dados de um aluno passando apenas o seu nome como argumento de um
            método. Ou seja, informamos o nome do aluno e o objeto
            correspondente a esse nome é devolvido. Para isso vamos usar a
            interface Map, que não estende Collection. Isso causa uma mudança
            profunda na aplicação, visto que os métodos usados anteriormente não
            poderão ser usados. Map tem seus próprios métodos para
            inserir/buscar/remover elementos na estrutura.
        </p>

        <p>
            Esta interface mapeia chaves para valores. Considerando a nova
            proposta do problema, a chave será o nome do aluno e o valor será o
            objeto aluno.
        </p>

        <p>
            Para usar uma classe que implementa Map, quaisquer classes que forem
            utilizadas como chave devem sobrescrever os métodos
            <span class="lf-badge">hashCode()</span> e
            <span class="lf-badge">equals()</span>. Isso é necessário porque em
            um Map as chaves não podem ser duplicadas, apesar dos valores
            poderem ser. Para a implementação mostrada na <b>Listagem 12</b>,
            utilizamos um <span class="lf-badge">TreeMap</span>, que garante que
            as chaves estarão em ordem ascendente.
        </p>

        <div class="code-area">
            <div class="code-caption">
                <b>Listagem 12</b>. Implementação de estrutura usando Map
            </div>
            <div class="pre_java">
                <pre><div><pre style="white-space:pre;" class="line-numbers pre_java"><code class="pre_java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapaAluno</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span> mapa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Aluno</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"João da Silva"</span><span class="token punctuation">,</span> <span class="token string">"Linux básico"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">,</span> <span class="token string">"OpenOffice"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">,</span> <span class="token string">"Internet"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Aluno</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aluno</span><span class="token punctuation">(</span><span class="token string">"Benedito Silva"</span><span class="token punctuation">,</span> <span class="token string">"OpenOffice"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapa<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"João da Silva"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapa<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Antonio Sousa"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapa<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapa<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Benedito Silva"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapa<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapa<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"Lúcia Ferreira"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Aluno</span><span class="token punctuation">&gt;</span></span> alunos <span class="token operator">=</span> mapa<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Aluno</span> e <span class="token operator">:</span> alunos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></pre>
            </div>
        </div>

        <p>
            Note que na declaração do collection informamos dois tipos: String e
            Aluno. O primeiro refere-se à chave e o segundo ao valor. O método
            para inserir na estrutura é <span class="lf-badge">put()</span>, que
            recebe dois objetos (chave e valor). Para recuperar um objeto
            específico utilizamos o método
            <span class="lf-badge">get()</span> passando a chave como parâmetro.
        </p>

        <p>
            Como Map não estende Collection, não tem os métodos
            <span class="lf-badge">iterator()</span> e
            <span class="lf-badge">listIterator()</span>. Entretanto, existe o
            método <span class="lf-badge">keySet()</span> que retorna um Set com
            as chaves do mapa, e o método
            <span class="lf-badge">values()</span> que retorna um Collection com
            os valores associados às chaves. Assim, podemos percorrer o mapa
            partindo desses métodos e usando enhanced-for. A aplicação deste
            comando (for (Objeto obj: colecao) { ... }) para percorrer o mapa
            também é mostrada na <b>Listagem 12</b>.
        </p>

        <p>
            Com tudo o que foi apresentado, podemos constatar que não existe a
            melhor implementação que resolve todos os problemas de estruturas de
            dados. Cada tipo de problema requer uma implementação diferente
            dependendo das características do mesmo. Escolher a implementação
            certa envolve saber o que sua interface oferece, quais as suas
            características e como ela será usada.
        </p>

        <p>
            Na vídeo aula deste artigo apresentamos o Java Collections
            Framework, abordando as principais coleções e algumas boas práticas.
        </p>

        <h3>Conclusões</h3>

        <p>
            Java Collections Framework tem muito mais recursos do que aqueles
            que apresentamos neste artigo. É fundamental estudarmos a
            documentação da API para nos familiarizarmos com as opções que esta
            estrutura oferece. Falamos no texto que as interfaces não são
            thread-safe, no entanto a classe Collections possui um método
            synchronized para cada collection. Este método retorna objetos
            thread-safe, para o caso de você necessitar de acesso concorrente. O
            conhecimento dos contratos de
            <span class="lf-badge">equals()</span> e
            <span class="lf-badge">hashCode()</span> é muito importante para a
            utilização adequada das interfaces aqui estudadas. A implementação
            errada desses métodos pode produzir resultados inesperados e
            errôneos.
        </p>

        <p>
            Além das interfaces apresentadas, existem outras, tais como
            <span class="lf-badge">NavigableSet</span>,
            <span class="lf-badge">BlockingQueue</span>,
            <span class="lf-badge">Deque</span>,
            <span class="lf-badge">BlockingDeque</span>,
            <span class="lf-badge">NavigableMap</span>, etc. É muito importante
            consultar sempre a documentação de Java SE para usar com eficiência
            a API.
        </p>

        <p>
            Neste artigo, aprendemos que é fundamental conhecer a hierarquia das
            coleções de maneira a utilizar as interfaces para programar
            polimorficamente. Vimos também que, além da hierarquia, é
            fundamental conhecer os algoritmos – métodos – para manipular
            corretamente as estruturas.
        </p>

        <p>
            Entender as características de cada interface e implementação
            fornece a base para a decisão de qual delas utilizar, visando
            solucionar, da melhor maneira possível, os problemas apresentados
            durante o desenvolvimento de aplicações.
        </p>

        <hr />

        <div class="lf-nota">
            <b>Nota</b>:
            <ul>
                <li>
                    <a
                        href="https://java.sun.com/docs/books/tutorial/collections/index.html"
                        target="_blank"
                        title="Tutorial da Java Collections Framework no site da Oracle/Sun"
                        >Tutorial da Java Collections Framework no site da
                        Oracle/Sun</a
                    >
                </li>
            </ul>
        </div>
    </section>
</section>
